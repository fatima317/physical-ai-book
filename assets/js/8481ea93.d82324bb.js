"use strict";(globalThis.webpackChunkphysical_ai_book=globalThis.webpackChunkphysical_ai_book||[]).push([[7168],{5305:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>m,frontMatter:()=>t,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"weekly-breakdown/week3/index","title":"Week 3 - ROS 2 Advanced Topics","description":"Learning Objectives","source":"@site/docs/weekly-breakdown/week3/index.mdx","sourceDirName":"weekly-breakdown/week3","slug":"/weekly-breakdown/week3/","permalink":"/physical-ai-book/docs/weekly-breakdown/week3/","draft":false,"unlisted":false,"editUrl":"https://github.com/fatima317/physical-ai-book/tree/main/docs/weekly-breakdown/week3/index.mdx","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"Week 3 - ROS 2 Advanced Topics"},"sidebar":"tutorialSidebar","previous":{"title":"Week 2 - Gazebo Simulation Basics","permalink":"/physical-ai-book/docs/weekly-breakdown/week2/"},"next":{"title":"Week 4 - Navigation and Path Planning","permalink":"/physical-ai-book/docs/weekly-breakdown/week4/"}}');var s=i(4848),r=i(8453);const t={sidebar_position:3,title:"Week 3 - ROS 2 Advanced Topics"},o="Week 3 - ROS 2 Advanced Topics",l={},c=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Custom Messages and Services",id:"custom-messages-and-services",level:2},{value:"Creating Custom Messages",id:"creating-custom-messages",level:3},{value:"Creating Custom Services",id:"creating-custom-services",level:3},{value:"Code Snippets",id:"code-snippets",level:2},{value:"Custom Action Example",id:"custom-action-example",level:3},{value:"Action Server Implementation",id:"action-server-implementation",level:3},{value:"Parameter Declaration and Usage",id:"parameter-declaration-and-usage",level:3},{value:"URDF Examples",id:"urdf-examples",level:2},{value:"Advanced URDF with Transmission and Gazebo Plugins",id:"advanced-urdf-with-transmission-and-gazebo-plugins",level:3},{value:"Kinematics Diagrams",id:"kinematics-diagrams",level:2},{value:"Hardware Tables",id:"hardware-tables",level:2},{value:"Advanced Sensor Integration",id:"advanced-sensor-integration",level:3},{value:"Key Terms",id:"key-terms",level:2},{value:"Learning Checkpoints",id:"learning-checkpoints",level:2},{value:"Quiz Questions",id:"quiz-questions",level:3},{value:"Practical Exercise",id:"practical-exercise",level:3},{value:"Hands-On Exercise",id:"hands-on-exercise",level:2},{value:"Personalization",id:"personalization",level:2},{value:"Translation",id:"translation",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"week-3---ros-2-advanced-topics",children:"Week 3 - ROS 2 Advanced Topics"})}),"\n",(0,s.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,s.jsx)(n.p,{children:"By the end of this week, you will be able to:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Implement custom message and service types in ROS 2"}),"\n",(0,s.jsx)(n.li,{children:"Use Actions for long-running tasks with feedback"}),"\n",(0,s.jsx)(n.li,{children:"Configure and use parameters effectively"}),"\n",(0,s.jsx)(n.li,{children:"Implement lifecycle nodes for robust systems"}),"\n",(0,s.jsx)(n.li,{children:"Debug and profile ROS 2 applications"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"custom-messages-and-services",children:"Custom Messages and Services"}),"\n",(0,s.jsx)(n.h3,{id:"creating-custom-messages",children:"Creating Custom Messages"}),"\n",(0,s.jsxs)(n.p,{children:["ROS 2 allows you to define custom message types for your specific application needs. Custom messages are defined in ",(0,s.jsx)(n.code,{children:".msg"})," files in the ",(0,s.jsx)(n.code,{children:"msg/"})," directory of your package."]}),"\n",(0,s.jsxs)(n.p,{children:["Example custom message (",(0,s.jsx)(n.code,{children:"CustomSensorData.msg"}),"):"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"# Custom sensor data message\nHeader header\nfloat64 temperature\nfloat64 humidity\nint32[] sensor_readings\nbool status_ok\n"})}),"\n",(0,s.jsx)(n.h3,{id:"creating-custom-services",children:"Creating Custom Services"}),"\n",(0,s.jsxs)(n.p,{children:["Services are defined in ",(0,s.jsx)(n.code,{children:".srv"})," files and consist of a request and response separated by ",(0,s.jsx)(n.code,{children:"---"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["Example custom service (",(0,s.jsx)(n.code,{children:"NavigateToPosition.srv"}),"):"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"# Request\nfloat64 x\nfloat64 y\nfloat64 theta\n---\n# Response\nbool success\nstring message\n"})}),"\n",(0,s.jsx)(n.h2,{id:"code-snippets",children:"Code Snippets"}),"\n",(0,s.jsx)(n.h3,{id:"custom-action-example",children:"Custom Action Example"}),"\n",(0,s.jsxs)(n.p,{children:["Actions are defined in ",(0,s.jsx)(n.code,{children:".action"})," files and include Goal, Result, and Feedback:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# MoveRobot.action\ngeometry_msgs/PoseStamped target_pose\n---\nbool success\nstring message\n---\ngeometry_msgs/PoseStamped current_pose\nfloat64 distance_remaining\n"})}),"\n",(0,s.jsx)(n.h3,{id:"action-server-implementation",children:"Action Server Implementation"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.action import ActionServer\nfrom rclpy.node import Node\n\nfrom geometry_msgs.msg import PoseStamped\nfrom my_robot_interfaces.action import MoveRobot  # Custom action\n\nclass MoveRobotActionServer(Node):\n\n    def __init__(self):\n        super().__init__('move_robot_action_server')\n        self._action_server = ActionServer(\n            self,\n            MoveRobot,\n            'move_robot',\n            self.execute_callback)\n\n    def execute_callback(self, goal_handle):\n        self.get_logger().info('Executing goal...')\n\n        feedback_msg = MoveRobot.Feedback()\n        result = MoveRobot.Result()\n\n        # Simulate robot movement\n        for i in range(0, 101, 5):\n            # Check if goal was cancelled\n            if goal_handle.is_cancel_requested:\n                goal_handle.canceled()\n                self.get_logger().info('Goal canceled')\n                return result\n\n            # Update feedback\n            feedback_msg.distance_remaining = float(100 - i)\n            feedback_msg.current_pose.pose.position.x = float(i / 100.0)\n            goal_handle.publish_feedback(feedback_msg)\n\n            # Sleep to simulate work\n            time.sleep(0.1)\n\n        goal_handle.succeed()\n        result.success = True\n        result.message = 'Goal reached successfully'\n        self.get_logger().info('Goal succeeded')\n\n        return result\n\ndef main(args=None):\n    rclpy.init(args=args)\n    action_server = MoveRobotActionServer()\n    rclpy.spin(action_server)\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,s.jsx)(n.h3,{id:"parameter-declaration-and-usage",children:"Parameter Declaration and Usage"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\n\nclass ParameterExampleNode(Node):\n\n    def __init__(self):\n        super().__init__('parameter_example_node')\n\n        # Declare parameters with default values and descriptions\n        self.declare_parameter('robot_name', 'my_robot')\n        self.declare_parameter('max_velocity', 1.0)\n        self.declare_parameter('safety_distance', 0.5)\n\n        # Get parameter values\n        self.robot_name = self.get_parameter('robot_name').value\n        self.max_velocity = self.get_parameter('max_velocity').value\n        self.safety_distance = self.get_parameter('safety_distance').value\n\n        self.get_logger().info(f'Robot name: {self.robot_name}')\n        self.get_logger().info(f'Max velocity: {self.max_velocity}')\n\ndef main(args=None):\n    rclpy.init(args=args)\n    node = ParameterExampleNode()\n    rclpy.spin(node)\n    node.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,s.jsx)(n.h2,{id:"urdf-examples",children:"URDF Examples"}),"\n",(0,s.jsx)(n.h3,{id:"advanced-urdf-with-transmission-and-gazebo-plugins",children:"Advanced URDF with Transmission and Gazebo Plugins"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\n<robot name="advanced_robot" xmlns:xacro="http://www.ros.org/wiki/xacro">\n\n  \x3c!-- Include other URDF/XACRO files --\x3e\n  <xacro:include filename="$(find my_robot_description)/urdf/materials.xacro" />\n  <xacro:include filename="$(find my_robot_description)/urdf/transmissions.xacro" />\n\n  \x3c!-- Base Link --\x3e\n  <link name="base_link">\n    <visual>\n      <geometry>\n        <mesh filename="package://my_robot_description/meshes/base_link.stl"/>\n      </geometry>\n      <material name="white"/>\n    </visual>\n    <collision>\n      <geometry>\n        <mesh filename="package://my_robot_description/meshes/base_link.stl"/>\n      </geometry>\n    </collision>\n    <inertial>\n      <mass value="10.0"/>\n      <inertia ixx="0.4" ixy="0.0" ixz="0.0" iyy="0.4" iyz="0.0" izz="0.2"/>\n    </inertial>\n  </link>\n\n  \x3c!-- Wheel macros --\x3e\n  <xacro:macro name="wheel" params="prefix *origin">\n    <link name="${prefix}_wheel">\n      <visual>\n        <geometry>\n          <cylinder radius="0.1" length="0.05"/>\n        </geometry>\n        <material name="black"/>\n      </visual>\n      <collision>\n        <geometry>\n          <cylinder radius="0.1" length="0.05"/>\n        </geometry>\n      </collision>\n      <inertial>\n        <mass value="1.0"/>\n        <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.02"/>\n      </inertial>\n    </link>\n\n    <joint name="${prefix}_wheel_joint" type="continuous">\n      <xacro:insert_block name="origin"/>\n      <axis xyz="0 0 1"/>\n      <parent link="base_link"/>\n      <child link="${prefix}_wheel"/>\n    </joint>\n\n    \x3c!-- Transmission for ROS Control --\x3e\n    <transmission name="${prefix}_wheel_trans">\n      <type>transmission_interface/SimpleTransmission</type>\n      <joint name="${prefix}_wheel_joint">\n        <hardwareInterface>hardware_interface/VelocityJointInterface</hardwareInterface>\n      </joint>\n      <actuator name="${prefix}_wheel_motor">\n        <mechanicalReduction>1</mechanicalReduction>\n      </actuator>\n    </transmission>\n  </xacro:macro>\n\n  \x3c!-- Wheels --\x3e\n  <xacro:wheel prefix="front_left">\n    <origin xyz="0.2 0.15 0" rpy="0 0 0"/>\n  </xacro:wheel>\n\n  <xacro:wheel prefix="front_right">\n    <origin xyz="0.2 -0.15 0" rpy="0 0 0"/>\n  </xacro:wheel>\n\n  <xacro:wheel prefix="rear_left">\n    <origin xyz="-0.2 0.15 0" rpy="0 0 0"/>\n  </xacro:wheel>\n\n  <xacro:wheel prefix="rear_right">\n    <origin xyz="-0.2 -0.15 0" rpy="0 0 0"/>\n  </xacro:wheel>\n\n  \x3c!-- Gazebo plugins --\x3e\n  <gazebo reference="base_link">\n    <material>Gazebo/White</material>\n  </gazebo>\n\n  <gazebo>\n    <plugin name="diff_drive" filename="libgazebo_ros_diff_drive.so">\n      <left_joint>front_left_wheel_joint</left_joint>\n      <right_joint>front_right_wheel_joint</right_joint>\n      <wheel_separation>0.3</wheel_separation>\n      <wheel_diameter>0.2</wheel_diameter>\n      <command_topic>cmd_vel</command_topic>\n      <odometry_topic>odom</odometry_topic>\n      <odometry_frame>odom</odometry_frame>\n      <robot_base_frame>base_link</robot_base_frame>\n    </plugin>\n  </gazebo>\n\n</robot>\n'})}),"\n",(0,s.jsx)(n.h2,{id:"kinematics-diagrams",children:"Kinematics Diagrams"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-mermaid",children:"graph TD\n    A[Base Frame] --\x3e B[Front Left Wheel]\n    A --\x3e C[Front Right Wheel]\n    A --\x3e D[Rear Left Wheel]\n    A --\x3e E[Rear Right Wheel]\n    B --\x3e F[Wheel Joint Control]\n    C --\x3e F\n    D --\x3e G[Wheeled Vehicle Kinematics]\n    E --\x3e G\n    F --\x3e H[Velocity Commands]\n    G --\x3e H\n\n    style A fill:#ff9999\n    style H fill:#99ff99\n"})}),"\n",(0,s.jsx)(n.h2,{id:"hardware-tables",children:"Hardware Tables"}),"\n",(0,s.jsx)(n.h3,{id:"advanced-sensor-integration",children:"Advanced Sensor Integration"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Sensor Type"}),(0,s.jsx)(n.th,{children:"Model"}),(0,s.jsx)(n.th,{children:"Interface"}),(0,s.jsx)(n.th,{children:"ROS Package"}),(0,s.jsx)(n.th,{children:"Purpose"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"3D LIDAR"}),(0,s.jsx)(n.td,{children:"Ouster OS1-64"}),(0,s.jsx)(n.td,{children:"Ethernet"}),(0,s.jsx)(n.td,{children:"ouster-ros"}),(0,s.jsx)(n.td,{children:"3D mapping and navigation"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Stereo Camera"}),(0,s.jsx)(n.td,{children:"ZED 2i"}),(0,s.jsx)(n.td,{children:"USB 3.0"}),(0,s.jsx)(n.td,{children:"zed-ros-wrapper"}),(0,s.jsx)(n.td,{children:"Depth perception and navigation"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Thermal Camera"}),(0,s.jsx)(n.td,{children:"FLIR Lepton"}),(0,s.jsx)(n.td,{children:"SPI"}),(0,s.jsx)(n.td,{children:"flir-camera-driver"}),(0,s.jsx)(n.td,{children:"Thermal imaging for special applications"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"IMU"}),(0,s.jsx)(n.td,{children:"VectorNav VN-100"}),(0,s.jsx)(n.td,{children:"UART/SPI"}),(0,s.jsx)(n.td,{children:"vectornav"}),(0,s.jsx)(n.td,{children:"Precise orientation and acceleration"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"key-terms",children:"Key Terms"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Action"}),": Long-running task with feedback and goal management"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Parameter"}),": Runtime-configurable values for nodes"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Lifecycle Node"}),": Node with explicit state management"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Custom Message"}),": User-defined data structures for communication"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Service"}),": Synchronous request/response communication"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Topic"}),": Asynchronous publish/subscribe communication"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"learning-checkpoints",children:"Learning Checkpoints"}),"\n",(0,s.jsx)(n.h3,{id:"quiz-questions",children:"Quiz Questions"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"What is the difference between a service and an action in ROS 2?"}),"\n",(0,s.jsx)(n.li,{children:"How do you declare a parameter in a ROS 2 node?"}),"\n",(0,s.jsx)(n.li,{children:"What are the three parts of an action definition?"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"practical-exercise",children:"Practical Exercise"}),"\n",(0,s.jsx)(n.p,{children:"Create a custom action that moves a simulated robot to a specified location with feedback on progress."}),"\n",(0,s.jsx)(n.h2,{id:"hands-on-exercise",children:"Hands-On Exercise"}),"\n",(0,s.jsx)(n.p,{children:"Implement a ROS 2 node that uses parameters to configure its behavior and communicates using a custom message type. Test the parameter changes using the command line."}),"\n",(0,s.jsx)(n.h2,{id:"personalization",children:"Personalization"}),"\n",(0,s.jsxs)("div",{className:"personalization-options",children:[(0,s.jsx)("h3",{children:"Adjust Learning Path:"}),(0,s.jsx)("button",{onClick:()=>setDifficulty("beginner"),children:"Beginner"}),(0,s.jsx)("button",{onClick:()=>setDifficulty("intermediate"),children:"Intermediate"}),(0,s.jsx)("button",{onClick:()=>setDifficulty("advanced"),children:"Advanced"})]}),"\n",(0,s.jsx)(n.h2,{id:"translation",children:"Translation"}),"\n",(0,s.jsx)("div",{className:"translation-controls",children:(0,s.jsx)("button",{onClick:()=>translateToUrdu(),children:"\u0627\u0631\u062f\u0648 \u0645\u06cc\u06ba \u062a\u0631\u062c\u0645\u06c1 \u06a9\u0631\u06cc\u06ba"})})]})}function m(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>o});var a=i(6540);const s={},r=a.createContext(s);function t(e){const n=a.useContext(r);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),a.createElement(r.Provider,{value:n},e.children)}}}]);